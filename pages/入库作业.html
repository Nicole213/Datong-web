<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>入库作业</title>
    <link rel="stylesheet" href="../styles/pages.css">
    <link rel="stylesheet" href="../styles/inbound-operation.css">
</head>
<body>
    <div class="page-container">
        <div class="page-header">
            <h1>入库作业</h1>
            <div class="port-badge" id="portBadge">入库口 1</div>
        </div>

        <!-- 扫描容器区域 -->
        <div class="scan-container-section" id="scanContainerSection">
            <div class="section-header">
                <h2>扫描容器</h2>
            </div>
            
            <!-- 入库单信息 -->
            <div class="info-card">
                <div class="card-title">入库单信息</div>
                <div class="info-grid">
                    <div class="info-item">
                        <label>入库单号：</label>
                        <span id="previewOrderNo">-</span>
                    </div>
                    <div class="info-item">
                        <label>计划数量：</label>
                        <span id="previewPlannedQty">-</span>
                    </div>
                    <div class="info-item">
                        <label>已入库数量：</label>
                        <span id="previewInboundQty">-</span>
                    </div>
                    <div class="info-item">
                        <label>待入库数量：</label>
                        <span id="previewPendingQty">-</span>
                    </div>
                </div>
            </div>

            <div class="info-card">
                <div class="card-title">扫描容器编码</div>
                <div class="scan-container-area">
                    <div class="scan-input-group">
                        <label>容器编码：</label>
                        <input type="text" class="scan-input" id="scanContainerCode" placeholder="请扫描容器编码" autocomplete="off">
                    </div>
                    <button class="scan-container-btn" id="scanContainerBtn">扫描容器</button>
                </div>
                <div class="help-text">请使用PDA扫描到达入库口的容器编码</div>
            </div>
        </div>

        <!-- 当前组盘信息（扫码后显示） -->
        <div class="current-pallet-section" id="currentPalletSection" style="display: none;">
            <div class="section-header">
                <h2>当前组盘信息</h2>
            </div>
            
            <!-- 入库单信息 -->
            <div class="info-card">
                <div class="card-title">入库单信息</div>
                <div class="info-grid">
                    <div class="info-item">
                        <label>入库单号：</label>
                        <span id="currentOrderNo">-</span>
                    </div>
                    <div class="info-item">
                        <label>计划数量：</label>
                        <span id="currentPlannedQty">-</span>
                    </div>
                    <div class="info-item">
                        <label>已入库数量：</label>
                        <span id="currentInboundQty">-</span>
                    </div>
                    <div class="info-item">
                        <label>待入库数量：</label>
                        <span id="currentPendingQty">-</span>
                    </div>
                </div>
            </div>

            <!-- 容器信息 -->
            <div class="info-card">
                <div class="card-title-with-action">
                    <div class="card-title">当前容器信息</div>
                    <button class="scan-new-container-btn" id="scanNewContainerBtn">扫描容器</button>
                </div>
                <div class="info-item" style="margin-bottom: 16px;">
                    <label>容器编码：</label>
                    <span id="currentContainerCode" class="highlight-text">-</span>
                </div>
                <div class="card-subtitle">推荐存储物料</div>
                <table class="mini-table">
                    <thead>
                        <tr>
                            <th>物料编码</th>
                            <th>物料名称</th>
                            <th>推荐数量</th>
                        </tr>
                    </thead>
                    <tbody id="recommendMaterialBody">
                        <!-- 推荐物料列表 -->
                    </tbody>
                </table>
            </div>

            <!-- 实际存储信息 -->
            <div class="info-card">
                <div class="card-title">实际存储信息</div>
                <div class="scan-area">
                    <div class="scan-input-group">
                        <label>扫描物料编码：</label>
                        <input type="text" class="scan-input" id="scanMaterialCode" placeholder="请扫描物料编码" autocomplete="off">
                    </div>
                    <div class="scan-input-group">
                        <label>实际入库数量：</label>
                        <input type="number" class="scan-input" id="actualQty" min="1" placeholder="请输入数量">
                    </div>
                    <button class="add-material-btn" id="addMaterialBtn">添加物料</button>
                </div>
                <div class="card-subtitle">已扫描物料列表</div>
                <table class="mini-table">
                    <thead>
                        <tr>
                            <th>物料编码</th>
                            <th>物料名称</th>
                            <th>实际数量</th>
                            <th width="80">操作</th>
                        </tr>
                    </thead>
                    <tbody id="actualMaterialBody">
                        <tr class="empty-row">
                            <td colspan="4" style="text-align: center; color: #999;">暂无数据，请扫描物料</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- 操作按钮 -->
            <div class="info-card">
                <div class="action-buttons">
                    <label class="checkbox-label">
                        <input type="checkbox" id="fullPalletCheck">
                        <span>标记满托</span>
                    </label>
                    <button class="primary-btn" id="confirmPalletBtn">确认组盘</button>
                    <button class="secondary-btn" id="cancelPalletBtn">取消组盘</button>
                </div>
            </div>
        </div>

        <!-- 待组盘列表 -->
        <div class="pending-pallet-section">
            <div class="section-header">
                <h2>待组盘列表</h2>
            </div>
            <div class="table-section">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th width="120">容器编码</th>
                            <th width="200">当前存储物料明细</th>
                            <th width="180">推荐存储物料</th>
                            <th width="100">推荐存储数量</th>
                            <th width="80">状态</th>
                        </tr>
                    </thead>
                    <tbody id="pendingPalletBody">
                        <!-- 数据将通过JavaScript动态生成 -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- 选择库位弹窗 -->
    <div class="modal" id="locationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>选择入库库位</h3>
                <span class="modal-close" id="locationClose">&times;</span>
            </div>
            <div class="modal-body">
                <div class="success-info">
                    <div class="success-icon">✓</div>
                    <div class="success-text">组盘成功！</div>
                </div>
                <div class="container-info">
                    <div class="info-item">
                        <label>容器编码：</label>
                        <span id="modalContainerCode">-</span>
                    </div>
                    <div class="info-item">
                        <label>存储物料：</label>
                        <span id="modalMaterial">-</span>
                    </div>
                    <div class="info-item">
                        <label>存储数量：</label>
                        <span id="modalQty">-</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="required">选择入库库位：</label>
                    <select class="form-input" id="locationSelect" required>
                        <option value="">请选择库位</option>
                    </select>
                    <div class="help-text">系统已自动推荐适配该容器的空库位</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn primary" id="confirmLocationBtn">确认入库</button>
                <button class="modal-btn secondary" id="cancelLocationBtn">取消</button>
            </div>
        </div>
    </div>

    <script src="../scripts/inbound-operation.js"></script>
</body>
</html>
